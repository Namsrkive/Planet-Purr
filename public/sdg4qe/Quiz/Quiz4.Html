<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SDG4 Quality Education Quiz</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100vw;
      font-family: "Press Start 2P", cursive;
      background: transparent !important;
      overflow-x: hidden;
      position: relative;
    }
    .bg-video {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      object-fit: cover !important;
      z-index: -9999 !important;
      pointer-events: none !important;
      background: transparent !important;
    }
    .progress-bar {
      width: 94vw; max-width: 700px;
      margin: 1.3rem auto 0 auto;
      text-align: right;
      font-family: "Press Start 2P", cursive;
      font-size: 1rem;
      color: #48b1e8;
      letter-spacing: 2px;
      background: rgba(255, 255, 255, 0.29);
      border-radius: 14px;
      box-shadow: 0 2px 12px #8de6ffe0;
      padding: 0.58em 0.9em 0.6em 0.6em;
      border: 2.2px solid #c9eafd;
      position: relative;
      animation: barBounce 1s cubic-bezier(0.4, 1.8, 0.2, 0.9) both;
      z-index: 2;
    }
    .bar-highlight {
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 20%;
      background: linear-gradient(70deg, #ace7fc88 50%, #e6f8fd55);
      border-radius: 14px 0 0 14px;
      animation: highlightAnim 1.2s infinite alternate;
      z-index: 0;
      pointer-events: none;
    }
    @keyframes barBounce { 0% {transform: translateY(-44px) scaleX(0.9);} 100% {transform: none;} }
    @keyframes highlightAnim { 0% {width: 17%;} 100% {width: 32%;} }

    .Qn1 {
      color: #163d6e;
      font-size: clamp(1.05rem, 5vw, 1.65rem);  /* Smaller heading */
      text-align: center;
      margin: 2.1rem 1rem 2rem 1rem;
      font-weight: 900;
      text-shadow: 2px 4px 0 #fff, 0 3px 13px #bbdeff;
      letter-spacing: 1.4px;
      z-index: 2;
      animation: bounceFadeIn 1.04s cubic-bezier(.8,1.5,.22,.95);
    }
    @keyframes bounceFadeIn {
      0% {transform: translateY(-60px); opacity: 0;}
      65% {transform: translateY(9px); opacity: 1;}
      87% {transform: translateY(-2px); opacity: 1;}
      100% {transform: none; opacity: 1;}
    }
    .timer {
      font-family: "Press Start 2P", cursive;
      color: #1871d5;
      font-size: 1.8rem;
      font-weight: 600;
      position: fixed;
      right: 25px;
      top: 25px;
      background: #e1f1fbcc;
      border-radius: 28px;
      padding: 10px 22px;
      border: 2.2px solid #83c0f7;
      text-shadow: 1px 1px 2px #a7cdf9;
      z-index: 20;
      user-select: none;
    }
    .quiz-container {
      width: 95vw; max-width: 900px;
      margin: 2rem auto 6rem auto;
      display: flex;
      flex-wrap: wrap;
      gap: 1.9rem 2rem;
      justify-content: center;
      align-items: center;
      position: relative;
      z-index: 2;
    }
    .card {
      width: 20vw; min-width: 240px; height: 110px; /* Card height reduced */
      background: rgba(255,255,255,0.62);
      border-radius: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 3px 20px #bae7ff80, 0 0px 0 #fff;
      color: #2870be;
      font-size: 0.93rem;
      text-align: center;
      cursor: pointer;
      position: relative;
      transition: box-shadow 0.22s ease, transform 0.16s cubic-bezier(0.6, 1.8, 0.6, 1.07);
      border: 2.2px solid #bdefffda;
      backdrop-filter: blur(3.5px);
      outline: none;
      user-select: none;
      overflow: visible;
      will-change: transform;
      animation: cardSlideIn 1.1s both cubic-bezier(.32, .7, .31, 1.3);
    }
    .card:focus { border-color: #72e2ff; box-shadow: 0 0 17px 6px #72e2ffb3; }
    .card:before {
      content: "";
      position: absolute;
      left: 8%; top: -6%; width: 84%; height: 40%;
      background: linear-gradient(100deg, #e3f7ffcc 2%, #fffffff2 95%);
      border-radius: 48px 38px 30px 20px;
      opacity: 0.16;
      pointer-events: none;
      z-index: 0;
      filter: blur(1.5px);
      animation: shimmerAnim 2s infinite linear;
    }
    @keyframes shimmerAnim {
      0% {left: 6%;}
      75% {left: 14%;}
      100% {left: 6%;}
    }
    @keyframes cardSlideIn {
      0% {transform: scale(0.85) translateY(44px); opacity: 0;}
      70% {transform: scale(1.05) translateY(-8px);}
      100% {transform: scale(1) translateY(0); opacity: 1;}
    }
    .card:active {transform: scale(0.95) translateY(4px) rotate(-3deg);}
    .card.selected {
      background: #def7c3;
      border: 3px solid #70cb5f;
      box-shadow: 0 0 30px 12px #9ee996aa;
      color: #187b2b;
      animation: cardSelectFlash 0.27s forwards;
    }
    @keyframes cardSelectFlash {
      0% {box-shadow: 0 0 0 0 #def7c3;}
      100% {box-shadow: 0 0 31px 21px #aff35591;}
    }
    .card-content {
      font-family: 'Press Start 2P', cursive;
      color: #2870be;
      background: none;
      width: 100%;
      pointer-events: none;
      padding: 0.67em 0.3em; /* Slimmer vertical padding */
      border-radius: 0.5em;
      font-size: 0.79rem; /* Smaller text */
      letter-spacing: 0.015em;
    }
    .confetti {
      font-size: 1.7rem;
      position: absolute;
      pointer-events: none;
      z-index: 99;
      opacity: 0.95;
      animation: confettiFly 1.05s forwards cubic-bezier(0.13, 2, 0.22, 1);
    }
    @keyframes confettiFly {
      to {
        transform: translateY(-112px) translateX(var(--confetti-x, 10px)) scale(1.9) rotate(46deg);
        opacity: 0;
      }
    }
    .mascot {
      position: fixed;
      bottom: 30px;
      left: 25px;
      width: 80px;
      height: 80px;
      opacity: 0.98;
      z-index: 20;
      animation: mascotWave 4s ease-in-out infinite;
      user-select: none;
    }
    @keyframes mascotWave {
      0%, 100% {transform: rotate(-14deg);}
      50% {transform: rotate(15deg);}
    }
    @media (max-width: 900px) {
      .card {width: 42vw; min-width: 170px;}
    }
    @media (max-width: 700px) {
      .quiz-container { flex-direction: column; gap: 1.3rem; }
      .card { width: 90vw; min-width: unset; margin-bottom: 1.5rem; height: 96px; }
      .Qn1 { font-size: 1rem; }
      .card-content { font-size: 0.74rem; }
      .progress-bar { font-size: 0.83rem; }
      .mascot { width: 55px; height: 55px; }
    }
    .timer {
      font-family: "Press Start 2P", cursive;
      color: #1871d5;
      font-size: 1.8rem;
      font-weight: 600;
      position: fixed;
      right: 25px;
      top: 25px;
      background: #e1f1fbcc;
      border-radius: 28px;
      padding: 10px 22px;
      border: 2.2px solid #83c0f7;
      text-shadow: 1px 1px 2px #a7cdf9;
      z-index: 20;
      user-select: none;
    }
  </style>
</head>
<body>
  <video autoplay muted loop playsinline class="bg-video">
    <source src="background.mp4" type="video/mp4" />
  </video>
  <div class="progress-bar" aria-label="Quiz progress">
    <div class="bar-highlight"></div>
    Q<span id="current-question">1</span> / <span id="total-questions">5</span>
  </div>
  <div class="timer" aria-live="polite" aria-atomic="true" id="timer">15</div>
  <h4 class="Qn1" id="question-text">How do you prefer to learn new things?</h4>
  <div class="quiz-container" role="list" aria-label="Answer options"></div>
  <img src="mascot.PNG" alt="Mascot waving" class="mascot" />
  <audio id="cheer-sound" src="https://cdn.pixabay.com/audio/2022/07/26/audio_124bfa07db.mp3" preload="auto"></audio>
  <script>
    const questions = [
      {
        question: "How do you prefer to learn new things?",
        options: [
          "A) Through real-world experiences",
          "B) With structured lessons and goals",
          "C) By watching others and reflecting",
          "D) By creating something new from scratch",
        ],
      },
      {
        question: "What was your favorite subject in school?",
        options: [
          "A) Art â€“ where creativity runs wild",
          "B) Science â€“ explosions, frogs, and fun facts",
          "C) Literature â€“ dramatic monologues, anyone?",
          "D) Recess â€“ because duh.",
        ],
      },
      {
        question: "How do you study best?",
        options: [
          "A) With lo-fi beats and snacks",
          "B) No music, I like my suffering raw",
          "C) Last minute panic but somehow it works",
          "D) I make a full aesthetic study planâ€¦ and then ignore it",
        ],
      },
      {
        question: "In your dream school, there would beâ€¦",
        options: [
          "A) Naps between every class",
          "B) A library built in a hidden mountain cave",
          "C) Mixed classes that is not based on grades, but the strengths of the child",
          "D) Occasional Field trips to space (or at least IKEA)",
        ],
      },
      {
        question: "You're given a billion dollars to improve education in poverty-stricken regions. What do you build first?",
        options: [
          "A) Financial support to families",
          "B) Teacher training programs",
          "C) Free schooling",
          "D) Improve infrastructure so students can reach school",
        ],
      },
    ];

    const quizContainer = document.querySelector(".quiz-container");
    const questionText = document.getElementById("question-text");
    const currentQuestionSpan = document.getElementById("current-question");
    const totalQuestionsSpan = document.getElementById("total-questions");
    const timerDisplay = document.getElementById("timer");
    const cheerSound = document.getElementById("cheer-sound");

    let currentQuestionIndex = 0;
    let answerHistory = [];
    let timer = null;
    const QUESTION_TIME = 15;
    let timeLeft = QUESTION_TIME;

    function renderQuestion() {
      quizContainer.innerHTML = "";
      const q = questions[currentQuestionIndex];
      questionText.textContent = q.question;
      currentQuestionSpan.textContent = currentQuestionIndex + 1;
      totalQuestionsSpan.textContent = questions.length;
      timeLeft = QUESTION_TIME;
      timerDisplay.textContent = timeLeft;
      q.options.forEach((optText, i) => {
        const card = document.createElement("div");
        card.classList.add("card");
        card.tabIndex = 0;
        card.innerHTML = `<span class="card-content">${optText}</span>`;
        card.addEventListener("click", () => selectAnswer(i, card));
        card.addEventListener("keyup", (e) => {
          if (e.key === "Enter" || e.key === " ") selectAnswer(i, card);
        });
        quizContainer.appendChild(card);
      });
      updateProgressBar();
    }

    function selectAnswer(index, card) {
      if (quizContainer.querySelector(".selected")) return;
      card.classList.add("selected");
      cheerSound.currentTime = 0;
      cheerSound.play();
      generateConfetti(card);
      answerHistory.push(index); // <--- collect for personality
      clearInterval(timer);
      setTimeout(() => {
        nextQuestion();
      }, 2000);
    }

    function generateConfetti(card) {
      const emojis = [
        "ðŸŽ‰", "ðŸ’«", "ðŸŒˆ", "âœ¨", "ðŸ’¥", "ðŸŽˆ", "ðŸŽŠ", "ðŸ¥³", "ðŸš€"
      ];
      for (let i = 0; i < 12; i++) {
        const confetti = document.createElement("span");
        confetti.className = "confetti";
        confetti.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        confetti.style.left = 40 + Math.random() * 20 + "%";
        confetti.style.top = 56 + Math.random() * 18 + "%";
        confetti.style.setProperty("--confetti-x", (Math.random() - 0.5) * 120 + "px");
        card.appendChild(confetti);
        setTimeout(() => confetti.remove(), 1200);
      }
    }

    function startTimer() {
      if (timer) clearInterval(timer);
      timer = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = timeLeft;
        if (timeLeft <= 0) {
          clearInterval(timer);
          nextQuestion();
        }
      }, 1000);
    }

    function nextQuestion() {
      if (currentQuestionIndex < questions.length - 1) {
        currentQuestionIndex++;
        renderQuestion();
        startTimer();
      } else {
        showResults();
      }
    }

    // PERSONALITY QUIZ REDIRECT BY MOST CHOSEN OPTION (A/B/C/D)
    function showResults() {
      let counts = [0, 0, 0, 0];
      answerHistory.forEach(i => counts[i]++);
      let resultIndex = counts.indexOf(Math.max(...counts));
      let resultPages = [
        "../Results/1/Result 1.html",
        "../Results/2/Result 2.html",
        "../Results/3/Result 3.html",
        "../Results/4/Result 4.html"
      ];
      window.location.href = resultPages[resultIndex];
    }

    function updateProgressBar() {
      const barHighlight = document.querySelector(".bar-highlight");
      if (barHighlight) {
        barHighlight.style.width = ((currentQuestionIndex + 1) / questions.length) * 100 + "%";
      }
    }

    renderQuestion();
    startTimer();
  </script>
</body>
</html>
