<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Qn5</title>

    <link href="https://fonts.googleapis.com/css2?family=Love+Ya+Like+A+Sister&display=swap" rel="stylesheet" />

    <style>
        /* ... (CSS remains the same for styling, no changes needed here) ... */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html,
        body {
            height: 100%;
            font-family: 'Love Ya Like A Sister', cursive;
            overflow-x: hidden;
        }

        .bg-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            object-fit: cover;
            z-index: -2;
        }

        /* Layout Containers */
        .Parent1 {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        .Parent {
            display: flex;
            flex-wrap: wrap;
            gap: 0.1rem;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: 1200px;
        }

        /* Box Style - Targeting the <a> tag */
        .box-link {
            height: 30vh;
            width: 20vw;
            min-width: 200px;
            /* Ensure file path matches case and spacing: Wood Cover.png */
            background-image: url('Wood Cover.png');
            background-repeat: no-repeat;
            background-position: center;
            background-size: contain;
            border-radius: 30px;
            position: relative;
            z-index: 1;
            text-align: center;
            transition: transform 0.3s ease-in-out;
            cursor: pointer;
            animation: pulseGlow 2s ease-in-out infinite;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
            overflow: hidden;
            text-decoration: none;
            color: inherit;
        }

        .box-link:link,
        .box-link:visited {
            color: white;
        }

        /* Glowing Shadow Layer */
        .box-link::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: inherit;
            filter: drop-shadow(2px 4px 3px rgba(217, 122, 13, 0.8));
            z-index: -1;
            border-radius: 30px;
        }

        .box-link:hover {
            transform: translateY(-10px) scale(1.08);
            animation: brightnessGlow 1.2s ease-in-out infinite;
        }

        .box-link:active {
            transform: translateY(-10px) scale(1.08);
            filter: brightness(1.4);
        }


        @keyframes brightnessGlow {
            0% {
                filter: brightness(1);
            }

            50% {
                filter: brightness(1.4);
            }

            100% {
                filter: brightness(1);
            }
        }

        @keyframes pulseGlow {

            0%,
            100% {
                filter: drop-shadow(0 0 5px rgba(255, 192, 203, 0.7));
                transform: scale(1);
            }

            50% {
                filter: drop-shadow(0 0 20px rgba(255, 192, 203, 1));
                transform: scale(1.05);
            }
        }

        .Qn1 {
            color: white;
            font-size: clamp(1rem, 10vw, 2rem);
            text-align: center;
            font-weight: 900;
            text-shadow: 4px 8px 5px rgba(0, 0, 0, 1);
            margin: 2rem 1rem 1rem;
        }


        .Intro1 {
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            color: white;
            transition: all 0.3s ease-in-out;
            z-index: 10;
        }

        .Intro1:hover {
            color: white;
            font-size: clamp(1rem, 2vw, 1.2rem);
        }


        @media (max-width: 1200px) {
            .Parent1 {
                padding: 0.5rem;
            }

            .Parent {
                flex-direction: column;
                align-items: center;
                gap: 0;
            }

            .box-link {
                width: 94vw;
                height: auto;
                aspect-ratio: 3 / 2;
                margin-bottom: 0.3rem;
                background-size: cover;
                padding: 0.2rem;
            }

            .Intro1 {
                font-size: clamp(1rem, 6vw, 5rem);
                position: relative;
                left: -7%;
                padding: 0.3rem;
            }
        }
    </style>
</head>

<body>

    <video autoplay muted loop playsinline class="bg-video">
        <source src="Qn1Bg.mp4" type="video/mp4" />
        Your browser does not support the video tag.
    </video>

    <h4 class="Qn1">
        The princess is sealed behind an unstable energy barrier. What‚Äôs your final move?
    </h4>

    <div class="Parent1">
        <div class="Parent" id="parent-boxes">
            </div>
    </div>

    <script>
        // 1. GET PREVIOUS ANSWERS (ans1, ans2, ans3, ans4)
        const urlParams = new URLSearchParams(window.location.search);
        const ans1 = urlParams.get('ans1') || urlParams.get('choice') || 'none';
        const ans2 = urlParams.get('ans2') || 'none';
        const ans3 = urlParams.get('ans3') || 'none';
        const ans4 = urlParams.get('ans4') || 'none';

        // 2. DEFINE Qn5 OPTIONS
        const options = [
            { text: "‚öîÔ∏è Channel your life <br>force to shatter it <br> even if it could mean <br> you don‚Äôt make it out", value: "life_force" },
            { text: "üå± Speak to the <br> spirit of the land <br>to break the seal <br> but you will lose <br> all your memories", value: "lose_memory" },
            { text: " ü§ùAgree to lose an <br> anatomy in <br> exchange for the<br> barrier to break ", value: "lose_anatomy" }
        ];

        // 3. RANDOM RESULT REDIRECTION FUNCTION
        function redirectToRandomResult(ans5Value) {
            // Generate a random number between 1 and 4 (inclusive)
            const randomResult = Math.floor(Math.random() * 4) + 1;
            
            // Construct the base query string with all 5 answers
            const queryString = `ans1=${encodeURIComponent(ans1)}&ans2=${encodeURIComponent(ans2)}&ans3=${encodeURIComponent(ans3)}&ans4=${encodeURIComponent(ans4)}&ans5=${encodeURIComponent(ans5Value)}`;
            
            // Construct the path: ../Results/[random]/Result[random].html
            const destinationPath = `../Results/${randomResult}/Result${randomResult}.html?${queryString}`;
            
            // Perform the redirection
            window.location.href = destinationPath;
        }

        const container = document.getElementById('parent-boxes');

        // 4. CREATE BOXES DYNAMICALLY WITH CUSTOM ONCLICK
        options.forEach((opt) => {
            const a = document.createElement('a');

            // Set a temporary link, and use JavaScript to handle the click and random redirection.
            a.href = '#'; 
            
            // Set the onclick handler to call the random redirection function
            a.onclick = function(event) {
                event.preventDefault(); // Stop the default link behavior
                redirectToRandomResult(opt.value);
            };

            a.className = 'box-link';
            a.innerHTML = `<p class="Intro1">${opt.text}</p>`;

            // Optional: Add touch listener for active state
            a.addEventListener('touchstart', () => {
                a.classList.add('active');
                setTimeout(() => {
                    a.classList.remove('active');
                }, 800);
            });

            container.appendChild(a);
        });
    </script>

</body>

</html>